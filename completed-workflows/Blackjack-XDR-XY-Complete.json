{
  "workflow": {
    "unique_name": "definition_workflow_0264J7I2R6D840RuylONItJXRF2PBTcf8Eb",
    "name": "Blackjack-XDR-XY-Complete",
    "title": "Blackjack-XDR-XY-Complete",
    "type": "generic.workflow",
    "base_type": "workflow",
    "variables": [
      {
        "schema_id": "datatype.integer",
        "properties": {
          "value": 0,
          "scope": "local",
          "name": "game_counter",
          "type": "datatype.integer",
          "is_required": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_0264J7I3CUB2B6xrSt6mGJRhGC1xrL32xCE",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.boolean",
        "properties": {
          "scope": "local",
          "name": "All Tests Passed",
          "type": "datatype.boolean",
          "is_required": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_0264J7I3CUNWW2lQwcUnA4mPRInM61BnyDV",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "input",
          "name": "Client URL",
          "type": "datatype.string",
          "is_required": true,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_0264J7I3CVIU93KqGpLxDXj7I4SxpV4X7R3",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "{\n    \"house\": {\n        \"name\": \"house\", \n        \"money\": 0\n        }, \n    \"players\": \n        [ ], \n    \"playerturn\": {}, \n\t\t  \n    \"gameid\": \"2mKYQR-klZ6XahlIAAAD\"\n} ",
          "scope": "local",
          "name": "Data Format",
          "type": "datatype.string",
          "is_required": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_0264J7I3CVA7H3PZmhOFrDKvfTKHyIxSasR",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "input",
          "name": "Participant Name",
          "type": "datatype.string",
          "is_required": true,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_0264J7I3CVQWZ2pfwO2TeTLP3WeybQmaGef",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.boolean",
        "properties": {
          "value": true,
          "scope": "input",
          "name": "Test Run",
          "type": "datatype.boolean",
          "is_required": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_0264J7I3CVYJ97YXOHnulhSrIpz4BFkGaZj",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.string",
        "properties": {
          "value": "",
          "scope": "input",
          "name": "Email",
          "type": "datatype.string",
          "description": "Please Enter your Email! We'll use this to send an email to you following the game with winner details.",
          "is_required": true,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_0264J7I3CV1LH3DfNTPHrqNAsVYT5ohn0Nr",
        "object_type": "variable_workflow"
      },
      {
        "schema_id": "datatype.boolean",
        "properties": {
          "value": true,
          "scope": "local",
          "name": "Unique Name Check",
          "type": "datatype.boolean",
          "is_required": false,
          "is_invisible": false
        },
        "unique_name": "variable_workflow_0264J7I3CW7AH5DnYSnlMO03T1IggEn8j6G",
        "object_type": "variable_workflow"
      }
    ],
    "properties": {
      "atomic": {
        "is_atomic": false
      },
      "delete_workflow_instance": false,
      "description": "Cisco Live Session: XDR Blackjack!",
      "display_name": "Blackjack-XDR-XY-Complete",
      "runtime_user": {
        "target_default": true
      },
      "target": {
        "target_type": "web-service.endpoint",
        "target_id": "definition_target_01X14ZFIHCZ0F4qeV1qQFNliF04q3ZKU74q",
        "execute_on_workflow_target": true
      }
    },
    "object_type": "definition_workflow",
    "actions": [
      {
        "unique_name": "definition_activity_0264J7I5EVJFL1lijWxm0GzbFwmw0hCBmJD",
        "name": "Group",
        "title": "Sort These Activities Into The Condition Statement Below!",
        "type": "logic.group",
        "base_type": "activity",
        "properties": {
          "continue_on_failure": false,
          "display_name": "Sort These Activities Into The Condition Statement Below!",
          "skip_execution": false
        },
        "object_type": "definition_activity"
      },
      {
        "unique_name": "definition_activity_0264J7IAB1UI650jrHlccY0DtSUOMdc0QPs",
        "name": "Group",
        "title": "Activity 1: Verifying Your Name",
        "type": "logic.group",
        "base_type": "activity",
        "properties": {
          "continue_on_failure": false,
          "display_name": "Activity 1: Verifying Your Name",
          "skip_execution": false
        },
        "object_type": "definition_activity",
        "actions": [
          {
            "unique_name": "definition_activity_0264J7IBS6K4F4tF3qOKcymF3wiTORe5EYH",
            "name": "For Each",
            "title": "For Each Participant At The Table",
            "type": "logic.for_each",
            "base_type": "activity",
            "properties": {
              "continue_on_failure": false,
              "display_name": "For Each Participant At The Table",
              "skip_execution": false,
              "source_array": "$global.variable_025XHXMLGMOMJ2XM9pFRenhgvFxor99IE66.global.variable_025XHXMLGMOMJ2XM9pFRenhgvFxor99IE66$"
            },
            "object_type": "definition_activity",
            "actions": [
              {
                "unique_name": "definition_activity_0264J7IE6PI605OFbcUXD8TbFVLt49kPWTb",
                "name": "Condition Block",
                "title": "Check If Username Already Exists",
                "type": "logic.if_else",
                "base_type": "activity",
                "properties": {
                  "continue_on_failure": false,
                  "display_name": "Check If Username Already Exists",
                  "skip_execution": false
                },
                "object_type": "definition_activity",
                "blocks": [
                  {
                    "unique_name": "definition_activity_0264J7IF74IU73OHGZNJGNthN9yEIKhVOHL",
                    "name": "Condition Branch",
                    "title": "If Name Does Exist",
                    "type": "logic.condition_block",
                    "base_type": "activity",
                    "properties": {
                      "condition": {
                        "left_operand": "$activity.definition_activity_0264J7IBS6K4F4tF3qOKcymF3wiTORe5EYH.input.source_array[@].Attendee$",
                        "operator": "eqi",
                        "right_operand": "$workflow.definition_workflow_0264J7I2R6D840RuylONItJXRF2PBTcf8Eb.input.variable_workflow_0264J7I3CVQWZ2pfwO2TeTLP3WeybQmaGef$"
                      },
                      "continue_on_failure": false,
                      "description": "If the submitted name already exists in the global game record.",
                      "display_name": "If Name Does Exist",
                      "skip_execution": false
                    },
                    "object_type": "definition_activity",
                    "actions": [
                      {
                        "unique_name": "definition_activity_0264J7I6YA4557AIEHgvKmIQU0v73oulAWV",
                        "name": "HTTP Request",
                        "title": "Send Message To Webex",
                        "type": "web-service.http_request",
                        "base_type": "activity",
                        "properties": {
                          "action_timeout": 180,
                          "allow_auto_redirect": true,
                          "allow_headers_redirect": false,
                          "body": "{\n\"roomId\":\"$global.variable_0257C2T1JSI077DkpTCi8lbUTOjElHqH3eZ.global.variable_0257C2T1JSI077DkpTCi8lbUTOjElHqH3eZ$\",\n\"text\": \"$workflow.definition_workflow_0264J7I2R6D840RuylONItJXRF2PBTcf8Eb.input.variable_workflow_0264J7I3CVQWZ2pfwO2TeTLP3WeybQmaGef$ is not a unique name in this sitting of XDR Blackjack. Please choose another display name!\"\n}",
                          "content_type": "application/json",
                          "continue_on_error_status_code": false,
                          "continue_on_failure": false,
                          "custom_headers": [
                            {
                              "name": "Authorization",
                              "value": "Bearer $global.variable_0257C31UC41SU5DDM61EcYCGq5j6re3ETZ5.global.variable_0257C31UC41SU5DDM61EcYCGq5j6re3ETZ5$"
                            }
                          ],
                          "description": "Send a message to Webex indicating that this name is already in use.",
                          "display_name": "Send Message To Webex",
                          "method": "POST",
                          "relative_url": "/v1/messages/",
                          "runtime_user": {
                            "target_default": true
                          },
                          "skip_execution": false,
                          "target": {
                            "use_workflow_target": true
                          }
                        },
                        "object_type": "definition_activity"
                      },
                      {
                        "unique_name": "definition_activity_0264J7I9E9WL45nnQiDaeu1aXvqH7BJhzYT",
                        "name": "Set Variables",
                        "title": "Write Duplicate Name",
                        "type": "core.set_multiple_variables",
                        "base_type": "activity",
                        "properties": {
                          "continue_on_failure": false,
                          "display_name": "Write Duplicate Name",
                          "skip_execution": false,
                          "variables_to_update": [
                            {
                              "variable_to_update": "$workflow.definition_workflow_0264J7I2R6D840RuylONItJXRF2PBTcf8Eb.local.variable_workflow_0264J7I3CW7AH5DnYSnlMO03T1IggEn8j6G$",
                              "variable_value_new": false
                            }
                          ]
                        },
                        "object_type": "definition_activity"
                      },
                      {
                        "unique_name": "definition_activity_0264J7I8ODCBO38PWuaDWAl2jafc3isUv19",
                        "name": "Completed",
                        "title": "Generate Error",
                        "type": "logic.completed",
                        "base_type": "activity",
                        "properties": {
                          "completion_type": "failed-completed",
                          "continue_on_failure": true,
                          "description": "Stop the workflow and prompt the user to enter another name.",
                          "display_name": "Generate Error",
                          "result_message": "Please choose another name",
                          "skip_execution": false
                        },
                        "object_type": "definition_activity"
                      },
                      {
                        "unique_name": "definition_activity_0264J7IGNTDJV6JzJYnN1iYjfI3zRRn52CJ",
                        "name": "Break",
                        "title": "Break",
                        "type": "logic.break",
                        "base_type": "activity",
                        "properties": {
                          "continue_on_failure": false,
                          "display_name": "Break",
                          "skip_execution": false
                        },
                        "object_type": "definition_activity"
                      }
                    ]
                  },
                  {
                    "unique_name": "definition_activity_0264J7IHO24IE7FHHej96xzyLKMC8Lkbb6A",
                    "name": "Condition Branch",
                    "title": "If Name Doesn't Exist",
                    "type": "logic.condition_block",
                    "base_type": "activity",
                    "properties": {
                      "condition": {
                        "left_operand": "$activity.definition_activity_0264J7IBS6K4F4tF3qOKcymF3wiTORe5EYH.input.source_array[@].Attendee$",
                        "operator": "ne",
                        "right_operand": "$workflow.definition_workflow_0264J7I2R6D840RuylONItJXRF2PBTcf8Eb.input.variable_workflow_0264J7I3CVQWZ2pfwO2TeTLP3WeybQmaGef$"
                      },
                      "continue_on_failure": false,
                      "description": "If submitted name does not exist in global game record.",
                      "display_name": "If Name Doesn't Exist",
                      "skip_execution": false
                    },
                    "object_type": "definition_activity",
                    "actions": [
                      {
                        "unique_name": "definition_activity_0264J7IJ2RSUT6UCnf2dTeC0zhwxlRihtH3",
                        "name": "Continue",
                        "title": "Continue",
                        "type": "logic.continue",
                        "base_type": "activity",
                        "properties": {
                          "continue_on_failure": false,
                          "display_name": "Continue",
                          "skip_execution": false
                        },
                        "object_type": "definition_activity"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "unique_name": "definition_activity_0264J7IJWHIS61lGWTGyEdTkFbVjH9yXjS4",
        "name": "Group",
        "title": "Activity 2: Atomic Functions",
        "type": "logic.group",
        "base_type": "activity",
        "properties": {
          "continue_on_failure": false,
          "display_name": "Activity 2: Atomic Functions",
          "skip_execution": false
        },
        "object_type": "definition_activity",
        "actions": [
          {
            "unique_name": "definition_activity_0264JA4AJV25W6zNLIvpxU6RBl1VZ1fMeqW",
            "name": "Getting the Table Ready (Single Player)",
            "title": "Getting the Table Ready (Single Player)",
            "type": "workflow.atomic_workflow",
            "base_type": "subworkflow",
            "properties": {
              "continue_on_failure": false,
              "display_name": "Getting the Table Ready (Single Player)",
              "input": {
                "variable_workflow_025W35BI442EF4PnU5KIDl2pdPxyhAlMAU2": "$workflow.definition_workflow_0264J7I2R6D840RuylONItJXRF2PBTcf8Eb.input.variable_workflow_0264J7I3CVIU93KqGpLxDXj7I4SxpV4X7R3$",
                "variable_workflow_025W35BI44GCB2UUJQ5wxFbwB5tM9rKKiSY": "$workflow.definition_workflow_0264J7I2R6D840RuylONItJXRF2PBTcf8Eb.input.variable_workflow_0264J7I3CVYJ97YXOHnulhSrIpz4BFkGaZj$",
                "variable_workflow_025W35BI44QEM1f02USprf6wFeb2HPcdXD9": "$workflow.definition_workflow_0264J7I2R6D840RuylONItJXRF2PBTcf8Eb.input.variable_workflow_0264J7I3CV1LH3DfNTPHrqNAsVYT5ohn0Nr$",
                "variable_workflow_025W35BI44Z891OszovKBqxPyuWg5FYxDhW": "$workflow.definition_workflow_0264J7I2R6D840RuylONItJXRF2PBTcf8Eb.input.variable_workflow_0264J7I3CVQWZ2pfwO2TeTLP3WeybQmaGef$",
                "variable_workflow_025W4R2JU1FJB5rxo1GnKb7sutOOcOVwRPc": "$workflow.definition_workflow_0264J7I2R6D840RuylONItJXRF2PBTcf8Eb.local.variable_workflow_0264J7I3CW7AH5DnYSnlMO03T1IggEn8j6G$"
              },
              "runtime_user": {
                "target_default": true
              },
              "skip_execution": false,
              "target": {
                "target_type": "web-service.endpoint",
                "use_workflow_target": true
              },
              "workflow_id": "definition_workflow_025W35BHJ2U7Y5jM0P3ggGpvAcfaYibfkzS",
              "workflow_name": "Getting the Table Ready (Single Player)"
            },
            "object_type": "definition_activity"
          },
          {
            "unique_name": "definition_activity_0264J7ILIVXXL3b2OluAB2LQFpURFvqVxzx",
            "name": "Set Variables",
            "title": "Update All Tests Passed Variable",
            "type": "core.set_multiple_variables",
            "base_type": "activity",
            "properties": {
              "continue_on_failure": false,
              "display_name": "Update All Tests Passed Variable",
              "skip_execution": false,
              "variables_to_update": [
                {
                  "variable_to_update": "$workflow.definition_workflow_0264J7I2R6D840RuylONItJXRF2PBTcf8Eb.local.variable_workflow_0264J7I3CUNWW2lQwcUnA4mPRInM61BnyDV$",
                  "variable_value_new": "$activity.definition_activity_0264JA4AJV25W6zNLIvpxU6RBl1VZ1fMeqW.output.variable_workflow_025W5M9OALP0B1yOo1dz6EnJ4Bm7ly9zZrp$"
                }
              ]
            },
            "object_type": "definition_activity"
          }
        ]
      },
      {
        "unique_name": "definition_activity_0264J7IMGNRIU5CSdlgvp916FQ5p2Two8r4",
        "name": "Condition Block",
        "title": "Determine Whether To Launch XDR Blackjack!",
        "type": "logic.if_else",
        "base_type": "activity",
        "properties": {
          "continue_on_failure": false,
          "display_name": "Determine Whether To Launch XDR Blackjack!",
          "skip_execution": false
        },
        "object_type": "definition_activity",
        "blocks": [
          {
            "unique_name": "definition_activity_0264J7IN9LXXE1a8b9FiUW2bQMMsySd1EZj",
            "name": "Condition Branch",
            "title": "All Tests Passed And Game is Running",
            "type": "logic.condition_block",
            "base_type": "activity",
            "properties": {
              "condition": {
                "left_operand": {
                  "left_operand": {
                    "left_operand": "$workflow.definition_workflow_0264J7I2R6D840RuylONItJXRF2PBTcf8Eb.local.variable_workflow_0264J7I3CUNWW2lQwcUnA4mPRInM61BnyDV$",
                    "operator": "eq",
                    "right_operand": true
                  },
                  "operator": "and",
                  "right_operand": {
                    "left_operand": "$workflow.definition_workflow_0264J7I2R6D840RuylONItJXRF2PBTcf8Eb.input.variable_workflow_0264J7I3CVYJ97YXOHnulhSrIpz4BFkGaZj$",
                    "operator": "eq",
                    "right_operand": false
                  }
                },
                "operator": "and",
                "right_operand": {
                  "left_operand": "$workflow.definition_workflow_0264J7I2R6D840RuylONItJXRF2PBTcf8Eb.local.variable_workflow_0264J7I3CW7AH5DnYSnlMO03T1IggEn8j6G$",
                  "operator": "eq",
                  "right_operand": true
                }
              },
              "continue_on_failure": false,
              "display_name": "All Tests Passed And Game is Running",
              "skip_execution": false
            },
            "object_type": "definition_activity",
            "actions": [
              {
                "unique_name": "definition_activity_0264J7IP9851Q0dSQhtRAiVv9Wey61Hp2Ks",
                "name": "Initialize Blackjack Game",
                "title": "Initialize Blackjack Game",
                "type": "workflow.atomic_workflow",
                "base_type": "subworkflow",
                "properties": {
                  "continue_on_failure": false,
                  "description": "This Atomic Function generates a random game_id and sends this, along with the input username, to the player's game client. This initializes the game of Blackjack for the game client. This information is also stored in the XDR global data record, \"Blackjack Game History\".",
                  "display_name": "Initialize Blackjack Game",
                  "input": {
                    "variable_workflow_025V8W920O2TD0fWvQBm8KDa7EwBQJJFPwc": "$workflow.definition_workflow_0264J7I2R6D840RuylONItJXRF2PBTcf8Eb.input.variable_workflow_0264J7I3CVQWZ2pfwO2TeTLP3WeybQmaGef$"
                  },
                  "runtime_user": {
                    "target_default": true
                  },
                  "skip_execution": false,
                  "target": {
                    "no_target": true
                  },
                  "workflow_id": "definition_workflow_025V8SI32E1I61pxPwmzoVOSRbgkfQ9B0qh",
                  "workflow_name": "Initialize Blackjack Game"
                },
                "object_type": "definition_activity"
              },
              {
                "unique_name": "definition_activity_0264J7IQLH2075u2gRjh7mOjLspnJHWBma9",
                "name": "While Loop",
                "title": "While Game Is Active",
                "type": "logic.while",
                "base_type": "activity",
                "properties": {
                  "continue_on_failure": false,
                  "description": "This loop occurs for the duration of the session. ",
                  "display_name": "While Game Is Active",
                  "skip_execution": false
                },
                "object_type": "definition_activity",
                "blocks": [
                  {
                    "unique_name": "definition_activity_0264J7IRII2L32SM1VeCIhRftuFVv66fqpT",
                    "name": "Condition Branch",
                    "title": "If game_counter < 500",
                    "type": "logic.condition_block",
                    "base_type": "activity",
                    "properties": {
                      "condition": {
                        "left_operand": {
                          "left_operand": "$workflow.definition_workflow_0264J7I2R6D840RuylONItJXRF2PBTcf8Eb.local.variable_workflow_0264J7I3CUB2B6xrSt6mGJRhGC1xrL32xCE$",
                          "operator": "lt",
                          "right_operand": 500
                        },
                        "operator": "and",
                        "right_operand": {
                          "left_operand": "$global.variable_025R2OZ4IU8AH1cybIGaZ71aQ8d6OxuxKrQ.global.variable_025R2OZ4IU8AH1cybIGaZ71aQ8d6OxuxKrQ$",
                          "operator": "eq",
                          "right_operand": true
                        }
                      },
                      "continue_on_failure": false,
                      "description": "This is the exit condition of our while loop. In this case, we update a counter called \"game_counter\" up to 500, at which point the game of Blackjack will conclude. ",
                      "display_name": "If game_counter < 500",
                      "skip_execution": false
                    },
                    "object_type": "definition_activity",
                    "actions": [
                      {
                        "unique_name": "definition_activity_0264J7IT4CS8B36Veek1zXFzBSLssV2guOC",
                        "name": "Execute Python Script",
                        "title": "Get Game State From The User's Client",
                        "type": "python3.script",
                        "base_type": "activity",
                        "properties": {
                          "action_timeout": 180,
                          "continue_on_failure": false,
                          "description": "This activity block allows us to insert Python code into our XDR Orchestration workflow! In this case, we input the client URL and make a \"Get\" request to our client to obtain information on the current state of the game. In particular, we want to keep track of earnings as hands are being played and store this information globally. ",
                          "display_name": "Get Game State From The User's Client",
                          "script": "import sys, json, requests\n\n#Load client url into variable url\nurl=sys.argv[1]\n\n#Remove white space and potential final \"/\" from user input\nurl=url.strip()\nif url[-1] == \"/\":\n  url=url.rstrip(url[-1])\n\n#add API endpoint for reading and posting to the client game config  \nactive_url=url + \"/api/config\"\n\n#Perform a get api request using the requests library\nheaders = {\n            'Content-Type': 'application/json',\n            'Accept': 'application/json'\n            }\npayload = json.dumps({})\nresponse = requests.request(\"GET\", active_url, headers=headers, data=payload)\n\n#Load the response into a dictionary\ncurrent_config = json.loads(response.text)\n\n#The current money for your player will be the value under the key \"balance\"\ncurrent_money = current_config[\"balance\"]",
                          "script_arguments": [
                            "$workflow.definition_workflow_0264J7I2R6D840RuylONItJXRF2PBTcf8Eb.input.variable_workflow_0264J7I3CVIU93KqGpLxDXj7I4SxpV4X7R3$"
                          ],
                          "script_queries": [
                            {
                              "script_query": "current_money",
                              "script_query_name": "current_money",
                              "script_query_type": "integer"
                            }
                          ],
                          "skip_execution": false
                        },
                        "object_type": "definition_activity"
                      },
                      {
                        "unique_name": "definition_activity_0264J7IUDXO0J51YddSqmo876UHMNAw5WiZ",
                        "name": "Update Row in Table",
                        "title": "Update Game Record",
                        "type": "core.updaterowintable",
                        "base_type": "activity",
                        "properties": {
                          "action_timeout": 180,
                          "columns": [
                            {
                              "column_name": "Money",
                              "column_type": "string"
                            }
                          ],
                          "continue_on_failure": false,
                          "description": "This Active Block updates the player balance stored in the global game record.",
                          "display_name": "Update Game Record",
                          "input_table": "$global.variable_025XHXMLGMOMJ2XM9pFRenhgvFxor99IE66.global.variable_025XHXMLGMOMJ2XM9pFRenhgvFxor99IE66$",
                          "row": [
                            {
                              "key": "Money",
                              "type": "string",
                              "value": "$activity.definition_activity_0264J7IT4CS8B36Veek1zXFzBSLssV2guOC.output.script_queries.current_money$"
                            }
                          ],
                          "rows": {
                            "rows_matching_criteria": true,
                            "where_clause": "Attendee == \"$workflow.definition_workflow_0264J7I2R6D840RuylONItJXRF2PBTcf8Eb.input.variable_workflow_0264J7I3CVQWZ2pfwO2TeTLP3WeybQmaGef$\""
                          },
                          "skip_execution": false
                        },
                        "object_type": "definition_activity"
                      },
                      {
                        "unique_name": "definition_activity_0264J7IXL0YHY1Icl4YktKDCVnU14oEqGRI",
                        "name": "Update Leaderboard",
                        "title": "Update Leaderboard",
                        "type": "workflow.atomic_workflow",
                        "base_type": "subworkflow",
                        "properties": {
                          "continue_on_failure": false,
                          "display_name": "Update Leaderboard",
                          "input": {
                            "variable_workflow_025WYK2XGMXNN4WQCdQAzF3mDJmqogdr1cy": "$workflow.definition_workflow_0264J7I2R6D840RuylONItJXRF2PBTcf8Eb.input.variable_workflow_0264J7I3CVIU93KqGpLxDXj7I4SxpV4X7R3$"
                          },
                          "runtime_user": {
                            "target_default": true
                          },
                          "skip_execution": false,
                          "target": {
                            "no_target": true
                          },
                          "workflow_id": "definition_workflow_025WY88BJWUHQ4dCkcfr3zs1ZVRTZkkvcEH",
                          "workflow_name": "Update Leaderboard"
                        },
                        "object_type": "definition_activity"
                      },
                      {
                        "unique_name": "definition_activity_0264J7IZV3O6V1uBCGhAaSUETNpccPPQA5f",
                        "name": "Set Variables",
                        "title": "Increment Counter",
                        "type": "core.set_multiple_variables",
                        "base_type": "activity",
                        "properties": {
                          "continue_on_failure": false,
                          "display_name": "Increment Counter",
                          "skip_execution": false,
                          "variables_to_update": [
                            {
                              "variable_to_update": "$workflow.definition_workflow_0264J7I2R6D840RuylONItJXRF2PBTcf8Eb.local.variable_workflow_0264J7I3CUB2B6xrSt6mGJRhGC1xrL32xCE$",
                              "variable_value_new": "$workflow.definition_workflow_0264J7I2R6D840RuylONItJXRF2PBTcf8Eb.local.variable_workflow_0264J7I3CUB2B6xrSt6mGJRhGC1xrL32xCE$+1"
                            }
                          ]
                        },
                        "object_type": "definition_activity"
                      },
                      {
                        "unique_name": "definition_activity_0264J7J1LCBMT7XPZrFvFVdiyqpNWzdGqXT",
                        "name": "Sleep",
                        "title": "Wait Before Next Polling Interval",
                        "type": "core.sleep",
                        "base_type": "activity",
                        "properties": {
                          "continue_on_failure": false,
                          "display_name": "Wait Before Next Polling Interval",
                          "skip_execution": false,
                          "sleep_interval": 4
                        },
                        "object_type": "definition_activity"
                      }
                    ]
                  }
                ]
              },
              {
                "unique_name": "definition_activity_0264J7J2RPRXU5MDkviZn7btUIjSGcxPz5u",
                "name": "Select from Table",
                "title": "Generate Results String",
                "type": "core.selectfromtable",
                "base_type": "activity",
                "properties": {
                  "action_timeout": 180,
                  "columns": [
                    {
                      "column_name": "Attendee",
                      "column_type": "string"
                    },
                    {
                      "column_name": "Money",
                      "column_type": "string"
                    },
                    {
                      "column_name": "Email",
                      "column_type": "string"
                    },
                    {
                      "column_name": "Game_id",
                      "column_type": "string"
                    }
                  ],
                  "continue_on_failure": false,
                  "description": "This Activity Block filters our global game record and creates a string we can import into the following python function.",
                  "display_name": "Generate Results String",
                  "input_table": "$global.variable_025XHXMLGMOMJ2XM9pFRenhgvFxor99IE66.global.variable_025XHXMLGMOMJ2XM9pFRenhgvFxor99IE66$",
                  "number_of_rows": {
                    "all_rows": true
                  },
                  "persist_output": false,
                  "skip_execution": false,
                  "sorting": {
                    "no_sort": true
                  }
                },
                "object_type": "definition_activity"
              },
              {
                "unique_name": "definition_activity_0264J7J671RQL2UJ9twyMcQWoSAt3hloasF",
                "name": "Execute Python Script",
                "title": "Compute Player with Max Earnings",
                "type": "python3.script",
                "base_type": "activity",
                "properties": {
                  "action_timeout": 180,
                  "continue_on_failure": false,
                  "description": "This Python function determined who has the maximum earnings during the game time. The winning name is sent to the email Atomic Function.",
                  "display_name": "Compute Player with Max Earnings",
                  "script": "import sys, json, math\n\n#Load the string representation of our global data record into \"final_results\"\nfinal_results=json.loads(sys.argv[1])\nscore_list=[]\n\n#Create a list of only earnings values\nfor result in final_results:\n  if result[\"Attendee\"] != \"\":\n     score_list.append(int(result[\"Money\"]))\n\n#Determine the maximum earnings\nwinning_score=max(score_list)\n\n#Determine which player had the maximum earnings\nfor result in final_results:\n  if result[\"Attendee\"] != \"\":\n    if winning_score==int(result[\"Money\"]):\n      winning_name=result[\"Attendee\"]",
                  "script_arguments": [
                    "$activity.definition_activity_0264J7J2RPRXU5MDkviZn7btUIjSGcxPz5u.output.response_body$"
                  ],
                  "script_queries": [
                    {
                      "script_query": "winning_name",
                      "script_query_name": "winning_name",
                      "script_query_type": "string"
                    }
                  ],
                  "skip_execution": false
                },
                "object_type": "definition_activity"
              },
              {
                "unique_name": "definition_activity_0264J7J7MOKHK6wsFn1tY3MxxHTorBuVK3w",
                "name": "Group",
                "title": "Send a \"Congratulations\" Email!",
                "type": "logic.group",
                "base_type": "activity",
                "properties": {
                  "continue_on_failure": false,
                  "display_name": "Send a \"Congratulations\" Email!",
                  "skip_execution": false
                },
                "object_type": "definition_activity",
                "actions": [
                  {
                    "unique_name": "definition_activity_0264JAWFX0SPK05gnsyGikeV3pYvK1luu3X",
                    "name": "Winner Email",
                    "title": "Winner Email",
                    "type": "workflow.atomic_workflow",
                    "base_type": "subworkflow",
                    "properties": {
                      "continue_on_failure": false,
                      "display_name": "Winner Email",
                      "input": {
                        "variable_workflow_025R4XYAQKL101RsrpvPgwcf8dgs8JKF16f": "$activity.definition_activity_0264J7J671RQL2UJ9twyMcQWoSAt3hloasF.output.script_queries.winning_name$"
                      },
                      "runtime_user": {},
                      "skip_execution": false,
                      "target": {
                        "no_target": true
                      },
                      "workflow_id": "definition_workflow_025KXZZ522PI52xzHm3Z0DXEUvAwQesJAD5",
                      "workflow_name": "Winner Email"
                    },
                    "object_type": "definition_activity"
                  }
                ]
              }
            ]
          },
          {
            "unique_name": "definition_activity_0264J7J95KNGN4rI9RMliGbZZ1nN49zSWYu",
            "name": "Condition Branch",
            "title": "All Tests Passed - Re-run outside of a Test Run!",
            "type": "logic.condition_block",
            "base_type": "activity",
            "properties": {
              "condition": {
                "left_operand": {
                  "left_operand": {
                    "left_operand": "$workflow.definition_workflow_0264J7I2R6D840RuylONItJXRF2PBTcf8Eb.local.variable_workflow_0264J7I3CUNWW2lQwcUnA4mPRInM61BnyDV$",
                    "operator": "eq",
                    "right_operand": true
                  },
                  "operator": "and",
                  "right_operand": {
                    "left_operand": "$workflow.definition_workflow_0264J7I2R6D840RuylONItJXRF2PBTcf8Eb.input.variable_workflow_0264J7I3CVYJ97YXOHnulhSrIpz4BFkGaZj$",
                    "operator": "eq",
                    "right_operand": true
                  }
                },
                "operator": "and",
                "right_operand": {
                  "left_operand": "$workflow.definition_workflow_0264J7I2R6D840RuylONItJXRF2PBTcf8Eb.local.variable_workflow_0264J7I3CW7AH5DnYSnlMO03T1IggEn8j6G$",
                  "operator": "eq",
                  "right_operand": true
                }
              },
              "continue_on_failure": false,
              "display_name": "All Tests Passed - Re-run outside of a Test Run!",
              "skip_execution": false
            },
            "object_type": "definition_activity",
            "actions": [
              {
                "unique_name": "definition_activity_0264J7JAEKXP77JjMiEXvYAPNkdxqIBHO2X",
                "name": "Completed",
                "title": "All Tests Passed!",
                "type": "logic.completed",
                "base_type": "activity",
                "properties": {
                  "completion_type": "succeeded",
                  "continue_on_failure": false,
                  "display_name": "All Tests Passed!",
                  "result_message": "Please re-run this workflow outside of a test run!",
                  "skip_execution": false
                },
                "object_type": "definition_activity"
              }
            ]
          },
          {
            "unique_name": "definition_activity_0264J7JB6L8VM2N2Wb5gZBVnnd6RpR9KayK",
            "name": "Condition Branch",
            "title": "Tests Failed Or Not Implemented",
            "type": "logic.condition_block",
            "base_type": "activity",
            "properties": {
              "condition": {
                "left_operand": {
                  "left_operand": "$workflow.definition_workflow_0264J7I2R6D840RuylONItJXRF2PBTcf8Eb.local.variable_workflow_0264J7I3CUNWW2lQwcUnA4mPRInM61BnyDV$",
                  "operator": "eq",
                  "right_operand": false
                },
                "operator": "or",
                "right_operand": {
                  "left_operand": "$workflow.definition_workflow_0264J7I2R6D840RuylONItJXRF2PBTcf8Eb.local.variable_workflow_0264J7I3CW7AH5DnYSnlMO03T1IggEn8j6G$",
                  "operator": "eq",
                  "right_operand": false
                }
              },
              "continue_on_failure": false,
              "display_name": "Tests Failed Or Not Implemented",
              "skip_execution": false
            },
            "object_type": "definition_activity",
            "actions": [
              {
                "unique_name": "definition_activity_0264J7JCENJPZ5EcoYBKCWEhyRjnKsNnFbh",
                "name": "Completed",
                "title": "Failed Test Conditions Exception",
                "type": "logic.completed",
                "base_type": "activity",
                "properties": {
                  "completion_type": "failed-completed",
                  "continue_on_failure": false,
                  "display_name": "Failed Test Conditions Exception",
                  "result_message": "Please ensure all tests are passed and implemented.",
                  "skip_execution": false
                },
                "object_type": "definition_activity"
              }
            ]
          }
        ]
      }
    ],
    "categories": [
      "category_1BMfMXSnJMyt5Ihqi7rWJr5N8cf"
    ]
  },
  "targets": {
    "definition_target_01X14ZFIHCZ0F4qeV1qQFNliF04q3ZKU74q": {
      "unique_name": "definition_target_01X14ZFIHCZ0F4qeV1qQFNliF04q3ZKU74q",
      "name": "Webex Teams",
      "title": "Webex Teams",
      "type": "web-service.endpoint",
      "base_type": "target",
      "object_type": "definition_target",
      "properties": {
        "description": "Webex Teams",
        "disable_certificate_validation": false,
        "display_name": "Webex Teams",
        "host": "webexapis.com",
        "no_runtime_user": true,
        "port": 443,
        "protocol": "https"
      }
    }
  },
  "variables": {
    "variable_0257C2T1JSI077DkpTCi8lbUTOjElHqH3eZ": {
      "unique_name": "variable_0257C2T1JSI077DkpTCi8lbUTOjElHqH3eZ",
      "properties": {
        "value": "Y2lzY29zcGFyazovL3VzL1JPT00vYzViYzcxYTAtY2MxZS0xMWVkLTlhMjMtZWIyMzczNTJiN2Q5",
        "scope": "global",
        "name": "webex-room-blackjack",
        "type": "datatype.string",
        "is_required": false,
        "is_invisible": false
      },
      "object_type": "variable"
    },
    "variable_0257C31UC41SU5DDM61EcYCGq5j6re3ETZ5": {
      "unique_name": "variable_0257C31UC41SU5DDM61EcYCGq5j6re3ETZ5",
      "properties": {
        "value": "ZWUwNzM3NzEtM2M2MS00YmM2LWFmMjMtYjg5MDE5NGIyZmUwMjU4NDlkZTgtYzM2_PF84_1eb65fdf-9643-417f-9974-ad72cae0e10f",
        "scope": "global",
        "name": "blackjack-dealer-token",
        "type": "datatype.string",
        "is_required": false,
        "is_invisible": false
      },
      "object_type": "variable"
    },
    "variable_025R2OZ4IU8AH1cybIGaZ71aQ8d6OxuxKrQ": {
      "unique_name": "variable_025R2OZ4IU8AH1cybIGaZ71aQ8d6OxuxKrQ",
      "properties": {
        "value": true,
        "scope": "global",
        "name": "Start Game",
        "type": "datatype.boolean",
        "is_required": false,
        "is_invisible": false
      },
      "object_type": "variable"
    },
    "variable_025XHXMLGMOMJ2XM9pFRenhgvFxor99IE66": {
      "unique_name": "variable_025XHXMLGMOMJ2XM9pFRenhgvFxor99IE66",
      "schema_id": "tabletype_025XHWDRE7FCX2X9l7ynqYiGwELiygUT7xR",
      "properties": {
        "value": [
          {
            "column_data": {
              "Attendee": "",
              "Email": "",
              "Game_id": "",
              "Money": "",
              "Start_time": "",
              "URL": ""
            }
          }
        ],
        "scope": "global",
        "name": "XDR Blackjack Game Record",
        "type": "datatype.table",
        "description": "Player earnings and time history for an XDR Blackjack session.",
        "is_required": false,
        "is_invisible": false
      },
      "object_type": "variable"
    }
  },
  "table_types": {
    "tabletype_025XHWDRE7FCX2X9l7ynqYiGwELiygUT7xR": {
      "unique_name": "tabletype_025XHWDRE7FCX2X9l7ynqYiGwELiygUT7xR",
      "data_type": "datatype.tabletype",
      "display_name": "XDR Blackjack Record",
      "columns": [
        {
          "name": "Game_id",
          "title": "Game Id",
          "type": "string"
        },
        {
          "name": "Start_time",
          "title": "Start Time",
          "type": "string"
        },
        {
          "name": "Attendee",
          "title": "Player Name",
          "type": "string"
        },
        {
          "name": "Money",
          "title": "Earnings",
          "type": "string"
        },
        {
          "name": "Email",
          "title": "Email",
          "type": "string"
        },
        {
          "name": "URL",
          "title": "Client URL",
          "type": "string"
        }
      ],
      "base_type": "datatype",
      "object_type": "tabletype"
    }
  },
  "atomic_workflows": [
    "definition_workflow_025W35BHJ2U7Y5jM0P3ggGpvAcfaYibfkzS",
    "definition_workflow_025V8SI32E1I61pxPwmzoVOSRbgkfQ9B0qh",
    "definition_workflow_025WY88BJWUHQ4dCkcfr3zs1ZVRTZkkvcEH",
    "definition_workflow_025KXZZ522PI52xzHm3Z0DXEUvAwQesJAD5"
  ],
  "dependent_workflows": [
    "definition_workflow_025W35BHJ2U7Y5jM0P3ggGpvAcfaYibfkzS",
    "definition_workflow_025V8SI32E1I61pxPwmzoVOSRbgkfQ9B0qh",
    "definition_workflow_025WY88BJWUHQ4dCkcfr3zs1ZVRTZkkvcEH",
    "definition_workflow_025KXZZ522PI52xzHm3Z0DXEUvAwQesJAD5"
  ]
}